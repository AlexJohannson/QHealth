Technical Specification: QHealth Fullstack Project



General Information:

Project Type: Fullstack application for a medical institution

- Goal:
    - Login
    - Refresh token
    - Account registration
    - Recovery request
    - Recovery password
    - WebSocket token
    - Getting QHealth role
    - Activate account via email
    - Block and unblock users
    - Getting security list for view login history; delete login records by ID
    - User to admin and revoke admin
    - Users list
    - Patrial update users profile
    - Getting a user profile by ID
    - Delete user account
    - Patient list (filtered)
    - Getting patient profile by ID
    - Getting list of role (operator, doctor, pharmacist)
    - Greate new role (operator, doctor, pharmacist)
    - Getting role profile by ID
    - Block and unblock role - doctor
    - Getting list if doctors (filtered)
    - Getting doctor profile by ID
    - Getting lost of diagnostics - modality
    - Create new modality
    - Patrial update modality
    - Getting modality by ID
    - Delete modality by ID
    - Getting list of booking diagnostics
    - Create new booking for a patient
    - Getting booking diagnostic by ID
    - Delete booking diagnostic by ID
	- Getting list of booking doctor visits
	- Create new visit to doctor for patient
	- Getting booking visit to doctor by ID
	- Delete booking visit to doctor by ID
	- Canceled booking visit to doctor by ID
	- Getting patient journals list
	- Create new patient journal
	- Getting patient journal by ID
	- Delete patient journal by ID
	- Getting list of patients prescriptions
	- Create new prescriptions for a patient
	- Getting patient prescription by ID
	- Delete patient prescription by ID

- User Roles:
	- Superuser
	- Admin
	- Doctor
	- Operator
	- Pharmacist
	- Patient (default role upon registration)


Administrative Roles

-Superuser:
	- Full control over the system.
	- User Management: view, update, block (is_active = false), assign admin (is_staff = true), delete.
	- Role Management: register doctors, operators, pharmacists; block doctors (is_available_for_booking = false).
	- Patient Management: view patients, book diagnostics and doctor visits, create journal entries, create prescriptions.
	- Diagnostics: create, edit, delete diagnostics; view booked diagnostics with details and delete bookings.
	- Visits to doctors: view booked visits with details; delete or cancel visits.
	- Journals & Prescriptions: view patient journals and prescriptions with details; delete by ID.
	- Logins: view login history; delete login records by ID.

-Admin:
	- Same capabilities as Superuser except:
	- Cannot manage Superuser.
	- Cannot revoke own admin status.
	- Cannot revoke other admins (only Superuser can).

(Superuser and Admin have full control over the system including booking diagnostics, booking doctor appointments,
creating prescriptions for patient and creating patient journal in case of technical failures or unforeseen situation
when the operator or doctor or pharmacist cannot create a booking or create patient journal or prescription. In case of
assisting patients with booking assistance, account recovery or assistance in making changes to the patient profile.)

-Doctor:
	- View filtered patient list with details.
	- Create journal entries for patients.
    - View, update, or delete own profile.
	- View diagnostics, booked diagnostics, booked visits to doctors, patient journals, and prescriptions.

-Operator:
	- View filtered patient list with details.
	- Book diagnostics and doctor visits for patients (with date and time).
	- View all roles (doctors, operators, pharmacists).
	- View, update, or delete own profile.
	- View diagnostics, booked diagnostics (with ability to delete), booked visits to the doctor(with ability to delete/cancel).
	- View patient journals and prescriptions.

-Pharmacist:
	- View filtered patient list with details.
	- Create prescriptions for patients.
	- View, update, or delete own profile.
	- View diagnostics and patient prescriptions.

-Patient:
    - View, update, or delete own profile.
	- View diagnostics with details and book diagnostics (without date and time).
	- View own booked diagnostics (filtered).
	- View own booked doctor visits (filtered) with ability to cancel.
	- View own journal entries (filtered).
	- View own prescriptions (filtered).
(The patient books diagnostics without a date and time. This is provided for by a real scenario of medical institutions
when the operator has to call the patient and clarify the diagnosis, causes, prescription from the doctor, possibly give
some advice or perhaps first book a visit to the doctor for a more accurate diagnosis. If everything is agreed, the operator
book diagnostics for the patient with a date and time. The patient can cancel a doctors visit. Before booking the operator
discusses all the details with the patient over the phone and books a doctors visit with a date and time. The patient can
cancel the reservation 24 hours before the visit this is a warning about the excellent reservation and the time within
which it can be canceled. The patient receives an email notification after booking a doctors visit with a detailed
description of the reservation and canceled visit to doctor.)


Required!!! It is not possible to delete a patients account if a patient has a reservation for a diagnosis or a visit to
a doctor. It is not possible to delete a doctor if a visit is booked for doctor. Validation for creating a diagnosis, it
is not possible to create two identical diagnoses and only administrator (Admin) and Superuser can create a diagnosis. The
patients journal and prescriptions are stored without validation, in a real scenario the medical history or prescription
history should be stored without correction in case something needs to be added or changed a new prescription on journal
is created. This is done so that each record carries its own value even if something needs to be corrected in it or it is
not relevant this is the patients life and health. The system lacks regex validation for creating diagnostics, creating
prescriptions and creating journal for patient. This is a deliberate decision that is consistent with medical practice:
data should be stored in any form, even if it does not conform to formal templates. In case of errors or changes a new
record is created to preserve the patients complete treatment history.

Non-Functional Requirements & Technologies

- Security:
	- JWT-based authentication.
	- Registration with role assignment.
	- Login attempt limitation: 5 failed attempts â†’ API blocked for 10 minutes.
	- Protection against brute-force attacks.
	- Data validation on both backend and frontend.

- System Requirements:
	- Pagination for lists.
	- Multiple filtering options depending on role and data type.
	- WebSockets for real-time updates:
		- Diagnostics
		- Diagnostic bookings
		- Doctor visit bookings
		- Patient journals
		- Patient prescriptions

- UX/UI:
	- UI - Clear and lightweight design using CSS (React).
	- UX - Easy-to-understand user interface.
	- Favicon with the emblem of medical institution
	- Home page with several photos of the medical institution and description of the medical institution and service
	- Import fonts from Google Fonts to the home page and logo of the medical institution in the header


- Pagination:
    - By default page size is 5 items
    - Maximum page size is 25 items
    - The user can change the page size within this range (5, 10, 15, 20, 25)
    - Pagination queryset ordered by 'id'

-Filtering:
    Users:
        - Name
        - Surname
        - Min age
        - Max age
        - Date of birth
        - City
        - Country
        - Gender
    Roles:
        - Role
        - Specialty (for doctors)
        - Ordering (by ID)
    Patient:
        - Name
        - Surname
        - Min age
        - Max age
        - Date of birth
        - City
        - Country
        - Gender
    Diagnostics:
        - Modality
        - Ordering (by ID)
    Booking Diagnostic:
        - Diagnostic service (modality)
        - Ordering (by ID)
    Booking doctor list:
        - Specialty (for doctor)
        - Doctor name
        - Doctor surname
        - Status (Booked/Canceled)
        - Ordering (by ID)
    Patient journal:
        - Diagnosis
    Patient prescription (recipe):
        - Recipe
    Security list:
        - Success (True/False)
        - Ordering (by ID, by success, by created_at)


Celery tasks:
    - Birthday greetings email notification (sent at 10 a.m. on the users birthday)
    - Merry Christmas greeting email notification (sent at 10 a.m. on december 25th of each year)
    - Happy New Year greeting email notification (sent at 10 a.m. on december 31th of each year)
    - Activate account email notification with link for activate account
    - Block doctor email notification, sent for doctor and change automatically is_available_for_booking = false
    - Block user account email notification, sent email for users and change automatically is_active = false
    - Booking diagnostic by staff email notification, sent to patient when diagnostic booked by operator with date and time
    - Booking diagnostic by patient email notification, sent to patient when patient booked diagnostic by self without date and time
    - Booking visit to doctor email notification, sent to patient when visit to doctor booked by staff
    - Canceled booking visit to doctor email notification sent to patient when visit was canceled.
    - Create admin email notification sent to user when superuser create admin
    - Create role email notification sent to user when superuser or admin create role (operator, doctor, pharmacist) with
        a specialty that is displayed only in the doctor email notification and mandatory for the doctor
    - Delete account email notification sent to user when account was deleted from system
    - Recovery password email notification with link for recovery password
    - Revoke admin email notification sent to admin when superuser revoke admin from system
    - Send patient massage email notification sent to patient when a new entry was made in the patients journal by the doctor
    - Send patient recipe message email notification sent to patient when a new entry was made in the patients list of
        recipes by the pharmacist
    - Unblock doctor email notification sent to the doctor which was blocked and change automatically
        is_available_for_booking = true
    - Unblock user account email notification sent to user which was blocked in the system and change
        automatically is_active = true
    - Welcome email notification sent to all users upon successful registration in the system


- Tech Stack:
	- Backend: Django REST Framework (DRF).
	- Database: MySQL.
	- Frontend: React.
	- API Documentation: Swagger + Postman collection.
	- Testing: Tests on backend includes: views - api`s, filters, managers, models, permissions, serializers.
	- Infrastructure: Docker, Docker Compose, Poetry, Nginx.


